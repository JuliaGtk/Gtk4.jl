<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Builder · Gtk4.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Gtk4.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../gettingStarted/">Getting Started</a></li><li><a class="tocitem" href="../properties/">Properties</a></li><li><a class="tocitem" href="../methods/">Automatically generated methods</a></li><li><a class="tocitem" href="../layout/">Layout</a></li><li><a class="tocitem" href="../signals/">Signals and Callbacks</a></li><li class="is-active"><a class="tocitem" href>Builder</a><ul class="internal"><li><a class="tocitem" href="#Callbacks-1"><span>Callbacks</span></a></li></ul></li><li><a class="tocitem" href="../textwidgets/">Text Widgets</a></li><li><a class="tocitem" href="../combobox/">Dropdown widgets</a></li><li><a class="tocitem" href="../listtreeview/">List and Tree Widgets</a></li><li><a class="tocitem" href="../dialogs/">Dialogs</a></li><li><a class="tocitem" href="../keyevents/">Key Events</a></li><li><a class="tocitem" href="../canvas/">Drawing with Cairo</a></li></ul></li><li><span class="tocitem">Howto</span><ul><li><a class="tocitem" href="../../howto/nonreplusage/">Using Gtk4 outside the REPL</a></li><li><a class="tocitem" href="../../howto/async/">Asynchronous UI</a></li></ul></li><li><a class="tocitem" href="../../diff3to4/">Gtk.jl to Gtk4.jl</a></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../doc/reference/">Gtk4 Reference</a></li><li><a class="tocitem" href="../../doc/GLib_reference/">GLib Reference</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Builder</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Builder</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaGtk/Gtk4.jl/blob/master/docs/src/manual/builder.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Builder-1"><a class="docs-heading-anchor" href="#Builder-1">Builder</a><a class="docs-heading-anchor-permalink" href="#Builder-1" title="Permalink"></a></h1><p>Until now we have created and arranged all widgets entirely using Julia code. While this works fine for small examples, it has the issue that we are tightly coupling the appearance of our application with the logic of our program code.</p><p>There is an alternative way to design user interfaces that strictly separates the layout from the code. This is done by an XML based file format that allows for describing any arrangement of widgets. In order to use the interface in your Julia Gtk4 application you will need <code>GtkBuilder</code>.</p><p>For GTK version 3 and earlier, <a href="https://glade.gnome.org">Glade</a> is often used as a GUI tool for creating GtkBuilder XML files in a WYSIWYG (what you see is what you get) manner, but Glade wasn&#39;t ported to GTK version 4. Instead <a href="https://flathub.org/apps/details/ar.xjuan.Cambalache">Cambalache</a> can be used (or the XML can be created by hand).</p><p>Once we have created the XML interface the result can be stored in an XML file that usually has the extension <code>.ui</code>. Let&#39;s assume we have created a file <code>myapp.ui</code> that looks like</p><pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;interface&gt;
  &lt;requires lib=&quot;gtk&quot; version=&quot;4.0&quot;/&gt;
  &lt;object class=&quot;GtkWindow&quot; id=&quot;window1&quot;&gt;
    &lt;property name=&quot;child&quot;&gt;
      &lt;object class=&quot;GtkButton&quot; id=&quot;button1&quot;&gt;
        &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;button&lt;/property&gt;
        &lt;property name=&quot;use_action_appearance&quot;&gt;False&lt;/property&gt;
        &lt;property name=&quot;focusable&quot;&gt;1&lt;/property&gt;
        &lt;property name=&quot;receives_default&quot;&gt;1&lt;/property&gt;
        &lt;property name=&quot;use_action_appearance&quot;&gt;False&lt;/property&gt;
      &lt;/object&gt;
    &lt;/property&gt;
  &lt;/object&gt;
&lt;/interface&gt;</code></pre><p>In order to access the widgets from Julia we first create a <code>GtkBuilder</code> object that will serve as a connector between the XML definition and our Julia code.</p><pre><code class="language-julia">b = GtkBuilder(&quot;path/to/myapp.ui&quot;)</code></pre><p>Alternatively, if we store the above XML definition in a Julia string <code>myapp</code> we can initialize the builder by</p><pre><code class="language-julia">b = GtkBuilder(myapp, -1)</code></pre><p>Now we want to access a widget from the XML file in order to actually display it on the screen. To do so we can call</p><pre><code class="language-julia">win = b[&quot;window1&quot;]</code></pre><p>for each widget we want to access in our Julia code. Widgets that we don&#39;t need to access from Julia, for example layout widgets like <code>GtkBox</code> that are being used only to arrange more interesting widgets for input or display, do not need to be loaded. You can thus see your builder as a kind of a widget store that you use when you need access to your widgets.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If you are developing the code in a package you can get the package directory using the <code>@__DIR__</code> macro. For instance, if your UI file is located at <code>MyPackage/src/builder/myuifile.ui</code>, you can get the full path using <code>uifile = joinpath(@__DIR__, &quot;builder&quot;, &quot;myuifile.ui&quot;)</code>.</p></div></div><p>In Gtk4.jl a macro <code>@load_builder</code> is defined that iterates over the <code>GtkWidget</code>s in a <code>GtkBuilder</code> object and automatically assigns them to Julia variables with the same id. For example, if a <code>GtkEntry</code> with an id <code>entry1</code> and two <code>GtkButton</code>s with id&#39;s <code>button1</code> and <code>button2</code> are present in <code>myapp.ui</code>, calling</p><pre><code class="language-julia">@load_builder(GtkBuilder(filename=&quot;myapp.ui&quot;))</code></pre><p>is equivalent to</p><pre><code class="language-julia">entry1 = b[&quot;entry1&quot;]
button1 = b[&quot;button1&quot;]
button2 = b[&quot;button2&quot;]</code></pre><p>Note that this only works for <code>GtkWidget</code>s that implement the interface <code>GtkBuildable</code>, which excludes some objects often defined in UI files, for example <code>GtkAdjustment</code>. Those objects will have to be fetched using calls to <code>get_object</code>.</p><h2 id="Callbacks-1"><a class="docs-heading-anchor" href="#Callbacks-1">Callbacks</a><a class="docs-heading-anchor-permalink" href="#Callbacks-1" title="Permalink"></a></h2><p>The XML file lets us only describe the visual structure of our widgets and not their behavior when the using is interacting with it. For this reason, we will have to add callbacks to the widgets which we do in Julia code as it was described in <a href="../signals/#Signals-and-Callbacks-1">Signals and Callbacks</a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../signals/">« Signals and Callbacks</a><a class="docs-footer-nextpage" href="../textwidgets/">Text Widgets »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 19 June 2023 23:13">Monday 19 June 2023</span>. Using Julia version 1.9.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
